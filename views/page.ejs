<html>
    <head>        
        <!-- DATADOG RUM-->
        <script
            src="https://www.datadoghq-browser-agent.com/datadog-rum-us.js"
            type="text/javascript">
        </script>
        <script>
            window.DD_RUM && window.DD_RUM.init({
                clientToken: '<%= rum.clientToken %>',
                applicationId: '<%= rum.applicationId %>',
                env: '<%= rum.env %>',
                service: '<%= rum.service %>',
                version: '<%= rum.version %>',
                allowedTracingOrigins: [/http:\/\/localhost:3000/],
                trackInteractions: true
            });
        </script>

        <!-- AJAX & CSS -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link href="/stylesheets/style.css" type="text/css" rel="stylesheet">

        <title>Datablog</title>
    </head>
    <body>
        <header>
            <div class="left">
                <div class="left">
                    <h1>Page: <span id="page"><%= id %></span></h1>
                </div>   
                <div class="right">
                    <h1>Created: <span><%= niceDate %></span></h1>
                </div>
            </div> 

            <div class="right">
                <div class =right">
                    <a href="/"><button class="home-button">Home</button></a>
                </div>
            </div>
        </header>
        
        <div>
            <div class=left>
                <h2><%= title %></h2>
                <div class="page-body-background">
                    <p class="page-body"><%= body %></p>
                </div>

                </br>
                
                <div> 
                    <button class="edit-button">Edit</button>
                    <button class="delete-button">Delete</button>
                </div>
            </div>
            <div class="right">
                <!--
                <div class="placeholder-image">Placeholder Image</span>
                -->
            </div>
        </div>

        <!-- Script for deleting page -->
        <script>
            $('.delete-button').click(function(){
                urlPage = '/api/page/' + $('#page').text();
                $.ajax({ 
                    url: urlPage,
                    type: 'DELETE',
                    success: function(result) {   
                        console.log("Successful Page Delete, Redirecting to Home");
                        window.location='/';
                    },
                    error: function(result) {
                        console.log("Error: " + result);
                    }
                });
            });

            $('.edit-button').click(function(){
                urlPage = '/page/' + $('#page').text() + '/edit';
                window.location = urlPage;
            });
        </script>
        
    </body>
</html>